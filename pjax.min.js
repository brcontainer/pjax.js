/* Pjax.js 0.6.5 | Copyright (c) 2023 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(e){var t,n,r,a,o="undefined"!=typeof window?window:{},i=o.document||{},l=o.history,c=o.URL,s=!!o.DOMParser,d=!!o.FormData,f={},u=i.implementation,p=o.location,h=p?p.protocol.replace(/:/g,"")+"://"+o.location.host:"",m="|INPUT|TEXTAREA|SELECT|DATALIST|BUTTON|OUTPUT|",v=!1,g=o.Element&&o.Element.prototype,T=[].slice,x=1,L=2,S=!!(g&&l.pushState&&(s||u&&u.createHTMLDocument)),j=[{attr:"containers",cfg:"containers"},{attr:"updatecurrent",cfg:"updatecurrent"},{attr:"updatehead",cfg:"updatehead"},{attr:"insertion",cfg:"insertion"},{attr:"loader",cfg:"loader"},{attr:"scroll-left",cfg:"scrollLeft"},{attr:"scroll-top",cfg:"scrollTop"},{attr:"done",cfg:"done"},{attr:"fail",cfg:"fail"}],y={supported:S,remove:J,start:function(e){if(S&&/^https?:$/.test(o.location.protocol)){for(var t in J(),n={linkSelector:"a:not([data-pjax-ignore]):not([href^='#']):not([href^='javascript:'])",formSelector:"form:not([data-pjax-ignore]):not([action^='javascript:'])",containers:["#pjax-container"],updatecurrent:!1,updatehead:!0,insertion:!0,scrollLeft:0,scrollTop:0,nocache:!1,loader:!0,proxy:"",headers:{}})e&&t in e&&(n[t]=e[t]);e=null,/^(interactive|complete)$/.test(i.readyState)?I():i.addEventListener("DOMContentLoaded",I)}},request:function(e,t){P(e,t.replace?L:x,t.method,null,t.data)},on:function(e,t){D(e,t)},off:function(e,t){D(e,t,!0)}};if(s)try{var E=C("<html><head><title>1</title></head><body>1</body></html>");s=!!(E.head&&E.title&&E.body)}catch(e){s=!1}function M(){if(r)return clearTimeout(r),r=0,a.className="pjax-loader pjax-hide",void setTimeout(M,20);a||((a=i.createElement("div")).innerHTML='<div class="pjax-progress"></div>',i.body.appendChild(a)),a.className="pjax-loader pjax-start",r=setTimeout((function(){r=0,a.className+=" pjax-inload"}),10)}function N(t,n,r){T.call(t.querySelectorAll(n)).forEach(r),r=e}function C(e){if(s)return(new DOMParser).parseFromString(e,"text/html");var t=u.createHTMLDocument("");return/^\s*<(\!doctype|html)[^>]*>/i.test(e)?(t.documentElement.innerHTML=e,t.body&&t.head||(t=u.createHTMLDocument("")).write(e)):t.body.innerHTML=e,t}function O(e,t,n,r){if(f[e])for(var a=f[e],o=0,i=a.length;o<i;o++)a[o](t,n,r)}function D(e,t,n){"function"==typeof t&&(f[e]||(f[e]=[]),n?f[e]=f[e].filter((function(e){return e!==t})):f[e].push(t))}function H(e,t,n,r){var a,c=C(t),s=n.containers,d=n.insertion,u=n.scrollLeft>-1?+n.scrollLeft:o.scrollX||o.pageXOffset,p=n.scrollTop>-1?+n.scrollTop:o.scrollY||o.pageYOffset;if(r){var h={pjaxUrl:e,pjaxData:t,pjaxConfig:n};r===x?l.pushState(h,"",e):r===L&&l.replaceState(h,"",e)}if(f.dom)return O("dom",e,c);n.updatehead&&c.head&&function(e){var t,n,r,a=[],o=e.children;for(t=o.length-1;t>=0;t--)"TITLE"!==o[t].tagName&&a.push(o[t].outerHTML);for(t=(o=i.head.children).length-1;t>=0;t--)"TITLE"===o[t].tagName||U(o[t],"resource")||(-1===(n=a.indexOf(o[t].outerHTML))?o[t].parentNode.removeChild(o[t]):a.splice(n,1));for((r=i.createElement("div")).innerHTML=a.join(""),t=(o=r.children).length-1;t>=0;t--)U(o[t],"resource")||i.head.appendChild(o[t]);r=a=null}(c.head),i.title=c.title||"";for(var m=s.length-1;m>=0;m--)(a=c.body.querySelector(s[m]))&&N(i,s[m],(function(e){if("append"===d||"prepend"===d){for(var t=i.createDocumentFragment(),n=0,r=T.call(a.childNodes),o=r.length;n<o;++n)t.appendChild(r[n]);"append"===d?e.appendChild(t):e.insertBefore(t,e.firstChild),t=null}else e.innerHTML=a.innerHTML}));o.scrollTo(u,p),c=s=null}function U(e,t){var n=e.getAttribute("data-pjax-"+t);if("true"===n||"false"===n)return"true"===n;if(!isNaN(n))return parseFloat(n);if(n.length>3){var r=n[0],a=n[n.length-1];if("["===r&&"]"===a||"{"===r&&"}"===a)try{n=JSON.parse(n)}catch(n){console.error("Invalid value in data-pjax-"+t+" attribute on element:",e)}}return n}function b(e,t,n,o,i,l,c){t.loader&&(r&&clearTimeout(r),a.className+=" pjax-end",r=setTimeout((function(){r=0,a.className+=" pjax-hide"}),1e3)),l&&H(e,l,t,n),O(l?"done":"fail",e,c),O("then",e),i&&new Function(i).call(o)}function w(){t&&t.abort()}function P(e,r,a,o,l,s){w(),O("initiate",e,s),s.loader&&M();var d=n.headers;if(d["X-PJAX-Container"]=s.containers.join(","),d["X-PJAX"]="true",f.handler)return O("handler",{url:e,state:r,method:a,element:o},s,b);for(var u in n.proxy&&(e=n.proxy+encodeURIComponent(e)),n.nocache&&(e=function(e){var t,n="_="+ +new Date;return c?(t=i.createElement("a")).href=e:t=new c(e),t.search+=(t.search?"&":"?")+n,e=t+"",t=null,e}(e)),(t=new XMLHttpRequest).open(a,e,!0),d)t.setRequestHeader(u,d[u]);t.onreadystatechange=function(){if(4===t.readyState){var n=t.status;if(n>=200&&n<300){var a=t.getResponseHeader("X-PJAX-Container");a&&(s.containers=a.split(",")),b(t.getResponseHeader("X-PJAX-URL")||e,s,r,o,s.done,t.responseText,n)}else b(e,s,r,o,s.fail,"",n)}},t.send(l||"")}function A(e){if(0===e.button){var t,r,a=e.target;if(a.matches(n.linkSelector))t=a.href;else{for(;a=a.parentNode;)if("A"===a.tagName){r=a;break}if(!r||!r.matches(n.linkSelector))return;t=(a=r).href}R("GET",t,null,a,e)}}function X(e){var t,r,a,o=e.target;if(o.matches(n.formSelector)){if("POST"===(a=String(o.method).toUpperCase())&&!d)return;if(t=o.action,"POST"!==a||"multipart/form-data"!==o.enctype)r=function(e){var t=[];return N(e,"[name]",(function(e){e.name&&-1!==("|"+e.nodeName+"|").indexOf(m)&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))})),t.join("&")}(o),"POST"!==a&&(t=t.replace(/\?[\s\S]+/,"")+"?",r&&(t+=r),r=null);else{if(!d)return;r=new FormData(o)}R(a,t,r,o,e)}}function R(e,t,r,a,i){if((t===h||0===t.indexOf(h+"/"))&&function(e){var t=String(e.target).toLowerCase();return!t||t===o.name||"_self"===t||"_top"===t&&o===o.top||"_parent"===t&&o===o.parent}(a)){i.preventDefault();var l=function(e){var t,r,a=JSON.parse(JSON.stringify(n));if(e)for(var o=j.length-1;o>=0;o--)(r=U(e,(t=j[o]).attr))&&(a[t.cfg]=r);return a}(a);"POST"===e||t!==o.location+""?P(t,x,e,a,r,l):l.updatecurrent&&P(t,L,e,a,r,l)}}function k(e){e.state&&e.state.pjaxUrl&&(w(),H(e.state.pjaxUrl,e.state.pjaxData,e.state.pjaxConfig,!1),O("history",e.state.pjaxUrl,e.state))}function I(){if(!v){v=!0;var e=o.location+"",t=o.history.state;t&&t.pjaxUrl||l.replaceState({pjaxUrl:e,pjaxData:i.documentElement.outerHTML,pjaxConfig:n},"",e),o.addEventListener("unload",w),o.addEventListener("popstate",k),n.linkSelector&&i.addEventListener("click",A),n.formSelector&&i.addEventListener("submit",X)}}function J(){n&&v&&(i.removeEventListener("click",A),i.removeEventListener("submit",X),o.removeEventListener("unload",w),o.removeEventListener("popstate",k),v=!1,n=e)}g&&!g.matches&&(g.matches=g.matchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||g.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1}),o.Pjax=y,"undefined"!=typeof module&&module.exports&&(module.exports=y),"undefined"!=typeof define&&define((function(){return y}))}();
