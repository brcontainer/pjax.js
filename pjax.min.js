/* Pjax.js 0.6.6 | Copyright (c) 2023 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(){var e,t,n,r,a,o="undefined"!=typeof window?window:{},i=o.document||{},c=o.history,l=!!o.DOMParser,s=!!o.FormData,d={},f=i.implementation,u=o.location,p=u?u.protocol+"//"+u.host:"",h="|INPUT|TEXTAREA|SELECT|DATALIST|BUTTON|OUTPUT|",m=!1,v=o.Element&&o.Element.prototype,T=[].slice,g=1,x=2,S=!!(v&&c.pushState&&(l||f&&f.createHTMLDocument)),L=[{attr:"containers",cfg:"containers"},{attr:"updatecurrent",cfg:"updatecurrent"},{attr:"updatehead",cfg:"updatehead"},{attr:"insertion",cfg:"insertion"},{attr:"loader",cfg:"loader"},{attr:"scroll-left",cfg:"scrollLeft"},{attr:"scroll-top",cfg:"scrollTop"},{attr:"done",cfg:"done"},{attr:"fail",cfg:"fail"}],j={supported:S,remove:I,start:function(e){if(S&&/^https?:$/.test(o.location.protocol)){for(var n in I(),t={linkSelector:"a:not([data-pjax-ignore]):not([href^='#']):not([href^='javascript:'])",formSelector:"form:not([data-pjax-ignore]):not([action^='javascript:'])",containers:["#pjax-container"],updatecurrent:!1,updatehead:!0,insertion:a,proxy:a,scrollLeft:0,scrollTop:0,nocache:!1,loader:!0,headers:{}})e&&n in e&&(t[n]=e[n]);e=a,/^(interactive|complete)$/.test(i.readyState)?k():i.addEventListener("DOMContentLoaded",k)}},request:function(e,n){m&&P(e,n.replace?x:g,n.method,a,n.data,t)},on:function(e,t){O(e,t)},off:function(e,t){O(e,t,!0)}};if(l)try{var y=N("<html><head><title>1</title></head><body>1</body></html>");l=!!(y.head&&y.title&&y.body)}catch(e){l=!1}function E(){if(n)return clearTimeout(n),n=0,r.className="pjax-loader pjax-hide",void setTimeout(E,20);r||((r=i.createElement("div")).innerHTML='<div class="pjax-progress"></div>',i.body.appendChild(r)),r.className="pjax-loader pjax-start",n=setTimeout((function(){n=0,r.className+=" pjax-inload"}),10)}function M(e,t,n){T.call(e.querySelectorAll(t)).forEach(n),n=a}function N(e){if(l)return(new DOMParser).parseFromString(e,"text/html");var t=f.createHTMLDocument("");return/^\s*<(\!doctype|html)[^>]*>/i.test(e)?(t.documentElement.innerHTML=e,t.body&&t.head||(t=f.createHTMLDocument("")).write(e)):t.body.innerHTML=e,t}function C(e,t,n,r){if(d[e])for(var a=d[e],o=0,i=a.length;o<i;o++)a[o](t,n,r)}function O(e,t,n){"function"==typeof t&&(d[e]||(d[e]=[]),n?d[e]=d[e].filter((function(e){return e!==t})):d[e].push(t))}function H(e,t,n,r){var l,s=n.containers,f=t&&N(t),u=f&&f.body;if(!u||!u.querySelectorAll(s.join(",")).length)return"No such containers";var p={pjaxUrl:e,pjaxData:t,pjaxConfig:n};if(r===g?c.pushState(p,"",e):c.replaceState(p,"",e),d.dom)return C("dom",e,f);var h=n.insertion,m=n.scrollLeft>-1?+n.scrollLeft:o.scrollX||o.pageXOffset,v=n.scrollTop>-1?+n.scrollTop:o.scrollY||o.pageYOffset;n.updatehead&&f.head&&function(e){var t,n,r,o=[],c=e.children;for(t=c.length-1;t>=0;t--)"TITLE"!==c[t].tagName&&o.push(c[t].outerHTML);for(t=(c=i.head.children).length-1;t>=0;t--)"TITLE"===c[t].tagName||D(c[t],"resource")||(-1===(n=o.indexOf(c[t].outerHTML))?c[t].parentNode.removeChild(c[t]):o.splice(n,1));for((r=i.createElement("div")).innerHTML=o.join(""),t=(c=r.children).length-1;t>=0;t--)D(c[t],"resource")||i.head.appendChild(c[t]);r=o=a}(f.head),i.title=f.title||"";for(var x=s.length-1;x>=0;x--)(l=u.querySelector(s[x]))&&M(i,s[x],(function(e){if("append"===h||"prepend"===h){for(var t=i.createDocumentFragment(),n=T.call(l.childNodes),r=0,o=n.length;r<o;++r)t.appendChild(n[r]);"append"===h?e.appendChild(t):e.insertBefore(t,e.firstChild),t=a}else e.innerHTML=l.innerHTML}));o.scrollTo(m,v),f=s=a}function D(e,t){var n=e.getAttribute("data-pjax-"+t);if("true"===n||"false"===n)return"true"===n;if(!isNaN(n))return parseFloat(n);if(n.length>3){var r=n[0],a=n[n.length-1];if("["===r&&"]"===a||"{"===r&&"}"===a)try{n=JSON.parse(n)}catch(n){console.error("Invalid value in data-pjax-"+t+" attribute on element:",e)}}return n}function b(e,t,a,o,i,c,l,s){t.loader&&(n&&clearTimeout(n),r.className+=" pjax-end",n=setTimeout((function(){n=0,r.className+=" pjax-hide"}),1e3)),s||(s=H(e,c,t,a)),C(s?"fail":"done",e,l,s),C("then",e),i&&new Function(i).call(o)}function U(){e&&e.abort()}function P(n,r,o,i,c,l){if(U(),C("initiate",n,l),l.loader&&E(),d.handler)return C("handler",{url:n,state:r,method:o,element:i},l,b);var s=n,f=t.headers;for(var u in f["X-PJAX-Container"]=l.containers.join(","),f["X-PJAX"]="true",t.proxy&&(s=t.proxy+encodeURIComponent(s)),t.nocache&&(s=function(e){var t="_="+ +new Date;return e+(-1===e.indexOf("?")?"?":"&")+t}(s)),(e=new XMLHttpRequest).open(o,s,!0),f)e.setRequestHeader(u,f[u]);e.onreadystatechange=function(){if(4===e.readyState){var t=e.status;if(t>=200&&t<300){var o=e.getResponseHeader("X-PJAX-Container");o&&(l.containers=o.split(",")),b(e.getResponseHeader("X-PJAX-URL")||n,l,r,i,l.done,e.responseText,t,a)}else b(n,l,r,i,l.fail,"",t,"HTTP Error ("+t+")")}},e.send(c||"")}function w(e){if(0===e.button){var n,r,o=e.target;if(o.matches(t.linkSelector))n=o.href;else{for(;o=o.parentNode;)if("A"===o.tagName){r=o;break}if(!r||!r.matches(t.linkSelector))return;n=(o=r).href}X("GET",n,a,o,e)}}function A(e){var n,r,o,i=e.target;if(i.matches(t.formSelector)){if("POST"===(o=String(i.method).toUpperCase())&&!s)return;if(n=i.action,"POST"!==o||"multipart/form-data"!==i.enctype)r=function(e){var t=[];return M(e,"[name]",(function(e){e.name&&-1!==("|"+e.nodeName+"|").indexOf(h)&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))})),t.join("&")}(i),"POST"!==o&&(n=n.replace(/\?[\s\S]+/,"")+"?",r&&(n+=r),r=a);else{if(!s)return;r=new FormData(i)}X(o,n,r,i,e)}}function X(e,n,r,a,i){if((n===p||0===n.indexOf(p+"/"))&&(!(l=(l=a.target||"").toLowerCase())||l===o.name||"_self"===l||"_top"===l&&o===o.top||"_parent"===l&&o===o.parent)){i.preventDefault();var c=function(e){var n,r,a=JSON.parse(JSON.stringify(t));if(e)for(var o=L.length-1;o>=0;o--)""!==(r=D(e,(n=L[o]).attr))&&(a[n.cfg]=r);return a}(a);"POST"===e||n!==o.location+""?P(n,g,e,a,r,c):c.updatecurrent&&P(n,x,e,a,r,c)}var l}function R(e){e.state&&e.state.pjaxUrl&&(U(),H(e.state.pjaxUrl,e.state.pjaxData,e.state.pjaxConfig,!1),C("history",e.state.pjaxUrl,e.state))}function k(){if(!m){m=!0;var e=o.location+"",n=o.history.state;n&&n.pjaxUrl||c.replaceState({pjaxUrl:e,pjaxData:i.documentElement.outerHTML,pjaxConfig:t},"",e),o.addEventListener("unload",U),o.addEventListener("popstate",R),t.linkSelector&&i.addEventListener("click",w),t.formSelector&&i.addEventListener("submit",A)}}function I(){t&&m&&(i.removeEventListener("click",w),i.removeEventListener("submit",A),o.removeEventListener("unload",U),o.removeEventListener("popstate",R),m=!1,t=a)}v&&!v.matches&&(v.matches=v.matchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector||v.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1}),o.Pjax=j,"undefined"!=typeof module&&module.exports&&(module.exports=j),"undefined"!=typeof define&&define((function(){return j}))}();
